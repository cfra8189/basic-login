<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>API Login Result</title>
  <link rel="stylesheet" href="/css/app.css">
  <style>
    .result-panel { max-width:820px; margin:28px auto; padding:20px; border-radius:10px; background: rgba(255,255,255,0.94); box-shadow: 0 12px 30px rgba(2,6,23,0.08); border:1px solid rgba(11,12,14,0.06); text-align:left; }
    .token-box { background:#0f1724; color:#e9eef6; padding:12px; border-radius:8px; font-family:monospace; font-size:13px; white-space:pre-wrap; word-break:break-word; }
    .meta-row { margin-top:12px; display:flex; gap:12px; align-items:center; }
    .copy-btn { background:#eaeaea; color:#0b0b0b; padding:8px 10px; border-radius:6px; border:1px solid rgba(11,12,14,0.06); font-weight:800; cursor:pointer; }
    .dark-mode .result-panel { background: rgba(6,8,12,0.84); color:#e6eef8; border:1px solid rgba(255,255,255,0.04); box-shadow: 0 12px 30px rgba(0,0,0,0.6); }
    .dark-mode .token-box { background:#071018; color:#d6d6d6; }
  </style>
</head>
<body>
  <div class="app-header">
    <div class="app-logo"><img src="/ltl-logo.PNG" alt="logo"/></div>
    <h2>Token</h2>
    <div>
      <label class="theme-switch">
        <input id="themeToggle" type="checkbox">
        <span class="slider"></span>
      </label>
    </div>
  </div>
  <div class="app-container">
    <div class="result-panel">
      <h1>API Login Successful</h1>
      <p style="margin:6px 0 12px 0">Below is your token and the user object. Keep the token secret.</p>
      <div class="token-box" id="tokenBox"><%= JSON.stringify({ token: token, user: user }, null, 2) %></div>
      <div class="meta-row">
        <button class="copy-btn" id="copyToken">Copy ID</button>
        <a class="muted-link" href="/">Home</a>
        <a class="muted-link" href="/users/<%= user._id %>">View Profile</a>
        <a class="btn" href="/users/<%= user._id %>/edit" style="margin-left:12px;">Edit Profile</a>
      </div>
    </div>
  </div>
  <script src="/js/theme.js"></script>
  <script>
    document.getElementById('copyToken').addEventListener('click', function(){
      const txt = '<%= user._id %>';
      if(navigator.clipboard){ navigator.clipboard.writeText(txt).then(()=>{ this.textContent = 'Copied'; setTimeout(()=> this.textContent='Copy ID',1200); }); }
    });
  </script>
</body>
</html>
